language: ruby

dist: xenial

addons:
  code_climate:
    repo_token: 46c8b29dd6711f35704e7c5a541486cbbf2cff8b2df8ce755bfc09917d3c1cbb
branches:
  only:
    - master
    - /.+-stable$/
rvm:
  - 2.3.8
  - 2.4.5
  - 2.5.3
  - 2.6.2
  - 2.7.1
  - 3.0.0
bundler_args: --without development
before_install:
  # There is a bug in travis. When using system ruby, bundler is not
  # installed and causes the default install action to fail.
  - if [ "$TRAVIS_RUBY_VERSION" = "system" ]; then sudo gem install "bundler:~> 1.15.0"; else gem install "bundler:~> 1.15.0"; fi
script: bundle exec rake spec
